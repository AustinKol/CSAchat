(this["webpackJsonpcsa-chat"]=this["webpackJsonpcsa-chat"]||[]).push([[0],{80:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(2),a=n.n(r),s=n(26),i=n.n(s),o=n(86),j=n(87),l=n(52),d=n(88),b=n(89),h=n.p+"static/media/conversation-animate.3ad3761f.svg",u=n.p+"static/media/example-animate.fe729bb8.svg";var x=function(){var e=Object(r.useRef)(null);function t(){e.current.scrollIntoView({behavior:"smooth"})}return Object(c.jsxs)(o.a,{children:[Object(c.jsxs)(j.a,{children:[Object(c.jsx)(l.a,{children:Object(c.jsxs)(d.a,{style:{backgroundColor:"white"},children:[Object(c.jsx)("h1",{children:"Hello, world!"}),Object(c.jsx)("p",{children:"This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information."}),Object(c.jsx)("p",{children:Object(c.jsx)(b.a,{variant:"primary",children:"Learn more"})})]})}),Object(c.jsx)(l.a,{children:Object(c.jsx)("img",{src:h,alt:"Art"})})]}),Object(c.jsx)(j.a,{children:Object(c.jsxs)(l.a,{children:[Object(c.jsxs)("div",{className:"arrow",onClick:t,children:[Object(c.jsx)("span",{onClick:t}),Object(c.jsx)("span",{onClick:t}),Object(c.jsx)("span",{onClick:t})]}),Object(c.jsx)("div",{className:"patting"})]})}),Object(c.jsxs)(j.a,{className:"justfiy-content-md-center",children:[Object(c.jsx)(l.a,{xs:!0,lg:"2"}),Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{ref:e,children:Object(c.jsx)("a",{href:"/anon",children:Object(c.jsx)("img",{src:u,alt:"chatButton"})})})}),Object(c.jsx)(l.a,{xs:!0,lg:"2"})]})]})};var O=function(){return Object(c.jsx)(c.Fragment,{children:'"En progres"'})},p=n(21),m=n(20),f=n(32),g=n(53),v=n(93),I=n(33),y=n(28),C=n.n(y),k=n(43),w=n(9),F=(n(76),n(50),n(91));var S=function(e){var t=w.a.firestore(),n=Object(r.useState)(""),a=Object(p.a)(n,2),s=a[0],i=a[1],d=Object(r.useRef)(null),h=t.collection("users").doc(e.uid).collection("messages"),u=h.orderBy("time"),x=(t.collection("users").doc(e.uid).get().then((function(n){var c;(null===(c=n.data())||void 0===c?void 0:c.timeCreated)||t.collection("users").doc(e.uid).set({timeCreated:w.a.firestore.FieldValue.serverTimestamp()})})),function(){var e=Object(k.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.add({text:t,time:w.a.firestore.FieldValue.serverTimestamp(),person:n});case 2:i(""),d.current.scrollIntoView({behavior:"smooth"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(I.b)(u),m=Object(p.a)(O,1)[0];return console.log(m),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(o.a,{children:[Object(c.jsx)(j.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(v.a,{children:[m&&m.map((function(t,n){return Object(c.jsx)(v.a.Item,{style:t.person^e.person?{placeSelf:"flex-start"}:{placeSelf:"flex-end"},children:t.text},n)})),Object(c.jsx)("div",{ref:d})]})})}),Object(c.jsx)(F.a,{onSubmit:function(){var t=Object(k.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),x(s,e.person);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(l.a,{xs:10,children:Object(c.jsx)(F.a.Group,{controlId:"msg",children:Object(c.jsx)(F.a.Control,{value:s,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Message"})})}),Object(c.jsx)(l.a,{children:Object(c.jsx)(b.a,{variant:"outline-primary",type:"submit",children:"Envoyer"})})]})})]})})};var A=function(){var e=m.a.firestore().collection("users").orderBy("timeCreated","desc"),t=Object(I.a)(e),n=Object(p.a)(t,3),a=n[0],s=n[1],i=n[2],o=Object(r.useState)(""),j=Object(p.a)(o,2),l=j[0],d=j[1];return""===l?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("strong",{children:Object(c.jsxs)(v.a,{horizontal:!0,children:[Object(c.jsx)(v.a.Item,{bsPrefix:"list-group-item col-md-2",children:"Personne"}),Object(c.jsx)(v.a.Item,{bsPrefix:"list-group-item col-md-4",children:"Temps Cree"}),Object(c.jsx)(v.a.Item,{bsPrefix:"list-group-item col-md-2",children:"Lien"})]})}),i&&Object(c.jsxs)("strong",{children:["Error: ",JSON.stringify(i)]}),s&&Object(c.jsx)("span",{children:"Loading"}),a&&a.docs.map((function(e,t){return console.log(e.data()),Object(c.jsxs)(v.a,{horizontal:!0,children:[Object(c.jsxs)(v.a.Item,{bsPrefix:"list-group-item col-md-2",children:["Personne ",t+1]}),Object(c.jsx)(v.a.Item,{bsPrefix:"list-group-item col-md-4",children:new Date(1e3*e.data().timeCreated.seconds).toLocaleString()}),Object(c.jsx)(v.a.Item,{bsPrefix:"list-group-item col-md-2",children:Object(c.jsx)("button",{onClick:function(){d(e.id)},children:"Contactez"})})]})}))]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(S,{uid:l,person:1})})};var P=function(){var e=m.a.auth(),t=Object(f.a)(e),n=Object(p.a)(t,2),r=n[0],a=(n[1],{callbacks:{signInSuccessWithAuthResult:function(e,t){e.user,e.credential,e.additionalUserInfo.isNewUser,e.additionalUserInfo.providerId,e.operationType;return!1}},signInFlow:"popup",signInOptions:[{provider:m.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!1}]});return Object(c.jsx)(c.Fragment,{children:r&&!r.isAnonymous?Object(c.jsx)(A,{}):Object(c.jsx)(g.StyledFirebaseAuth,{uiConfig:a,firebaseAuth:e})})},L=(n(80),n(90)),D=n(92),T=(n(81),n(55)),N=n(13);var B=function(){var e=m.a.auth(),t=Object(f.a)(e),n=Object(p.a)(t,2),r=n[0],a=n[1];return e.signInAnonymously(),Object(c.jsx)(c.Fragment,{children:!a&&r?Object(c.jsx)(S,{uid:r.uid,person:0}):"Telechargement en cours..."})};var E=function(){return m.a.apps.length?console.log("firebase is init"):m.a.initializeApp({apiKey:"AIzaSyDpFJ1vMnojgESGXD-yjlQyIXU8GuJNQLA",authDomain:"csachat-9dff3.firebaseapp.com",databaseURL:"https://csachat-9dff3-default-rtdb.firebaseio.com",projectId:"csachat-9dff3",storageBucket:"csachat-9dff3.appspot.com",messagingSenderId:"384915371882",appId:"1:384915371882:web:2a14a7141b635d69381713"}),console.log("here"),Object(c.jsxs)(T.a,{basename:"/CSAchat",children:[Object(c.jsxs)(L.a,{bg:"light",expand:"lg",children:[Object(c.jsx)(L.a.Brand,{href:"/",children:"Pairs-Aidants"}),Object(c.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsx)(L.a.Collapse,{id:"basic-navbar-nav",children:Object(c.jsxs)(D.a,{className:"mr-auto",children:[Object(c.jsx)(D.a.Link,{href:"/",children:"Accueil"}),Object(c.jsx)(D.a.Link,{href:"/signin",children:"Connection"}),Object(c.jsx)(D.a.Link,{href:"/selfhelp",children:"Ressources"})]})})]}),Object(c.jsxs)(N.c,{children:[Object(c.jsx)(N.a,{exact:!0,path:"/",children:Object(c.jsx)(x,{})}),Object(c.jsx)(N.a,{path:"/signin",children:Object(c.jsx)(P,{})}),Object(c.jsx)(N.a,{path:"/selfhelp",children:Object(c.jsx)(O,{})}),Object(c.jsx)(N.a,{path:"/teacherdash",children:Object(c.jsx)(A,{})}),Object(c.jsx)(N.a,{path:"/anon",children:Object(c.jsx)(B,{})})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root")),R()}},[[84,1,2]]]);
//# sourceMappingURL=main.7257c5a2.chunk.js.map
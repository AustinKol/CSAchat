(this["webpackJsonpcsa-chat"]=this["webpackJsonpcsa-chat"]||[]).push([[0],{82:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(2),s=n.n(c),r=n(28),i=n.n(r),o=n(86),j=n(87),l=n(53),d=n(88),b=n(89),u=n(22),h=n.p+"static/media/conversation-animate.3ad3761f.svg",x=n.p+"static/media/example-animate.edd3b698.svg";var p=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(l.a,{md:6,bsPrefix:"col align-self-center",children:Object(a.jsxs)(d.a,{className:"mb-0",style:{backgroundColor:"transparent"},children:[Object(a.jsx)("h1",{children:"Bienvenue"}),Object(a.jsx)("p",{children:"Nous sommes les pair aidants. Nous sommes i\xe7i pour vous aider. Chattez avec nous!"}),Object(a.jsx)("p",{children:Object(a.jsx)(b.a,{as:u.b,to:"/about",variant:"primary",children:"Nous conna\xeetre plus"})})]})}),Object(a.jsx)(l.a,{md:6,children:Object(a.jsx)("img",{src:h,alt:"Art"})})]})}),Object(a.jsxs)(o.a,{className:"hatched",children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(l.a,{className:"text-center",children:Object(a.jsx)("h1",{className:"pt-5 font-weight-bold font-weight-italic",children:"Chattez Maintenant!"})})}),Object(a.jsx)(j.a,{className:"mt-5 mb-5",children:Object(a.jsxs)(l.a,{className:"arrow",children:[Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{})]})}),Object(a.jsx)(j.a,{children:Object(a.jsx)(l.a,{md:12,className:"justfiy-content-md-center",children:Object(a.jsx)(u.b,{to:"/anon",children:Object(a.jsx)("img",{src:x,alt:"chatButton"})})})})]})]})};var O=function(){return Object(a.jsx)(a.Fragment,{children:'"En progr\xe8s"'})},m=n(21),f=n(20),g=n(33),v=n(55),y=n(93),F=n(34),I=n(26),C=n.n(I),N=n(40),k=n(9),w=(n(80),n(52),n(91));var S=function(e){var t=k.a.firestore(),n=Object(c.useState)(""),s=Object(m.a)(n,2),r=s[0],i=s[1],d=Object(c.useRef)(null),u=t.collection("users").doc(e.uid).collection("messages"),h=u.orderBy("time"),x=function(){var n=Object(N.a)(C.a.mark((function n(a,c){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.collection("users").doc(e.uid).get().then((function(n){var a,c;(null===(a=n.data())||void 0===a?void 0:a.timeCreated)&&(null===(c=n.data())||void 0===c?void 0:c.isFinished)||t.collection("users").doc(e.uid).set({timeCreated:k.a.firestore.FieldValue.serverTimestamp(),isFinished:!1})})),n.next=3,u.add({text:a,time:k.a.firestore.FieldValue.serverTimestamp(),person:c});case 3:i(""),d.current.scrollIntoView({behavior:"smooth"});case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();function p(){return(p=Object(N.a)(C.a.mark((function n(){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x("Ce chat a \xe9t\xe9 ferm\xe9 par le mod\xe9rateur.",1);case 2:return n.next=4,t.collection("users").doc(e.uid).update({isFinished:!0});case 4:e.thread("");case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var O=Object(F.b)(h),f=Object(m.a)(O,1)[0];return console.log(f),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(o.a,{children:[1===e.person?Object(a.jsxs)(j.a,{children:[Object(a.jsx)(l.a,{children:Object(a.jsx)(b.a,{onClick:function(){return e.thread("")},children:"Retourner au menu"})}),Object(a.jsx)(l.a,{children:Object(a.jsx)(b.a,{onClick:function(){return p.apply(this,arguments)},children:"Finir ce chat"})})]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(j.a,{children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(y.a,{children:[f&&f.map((function(t,n){return Object(a.jsx)(y.a.Item,{style:t.person^e.person?{placeSelf:"flex-start",borderColor:"#007bff",borderRadius:"3px",marginTop:"3px",borderWidth:"1px"}:{placeSelf:"flex-end",borderRadius:"3px",marginTop:"3px",borderWidth:"1px"},children:t.text},n)})),Object(a.jsx)("div",{ref:d})]})})})]}),Object(a.jsx)(o.a,{className:"fixed-bottom",children:Object(a.jsxs)(w.a,{className:"input-group mb-3",onSubmit:function(){var t=Object(N.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),x(r,e.person);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(a.jsx)(w.a.Control,{value:r,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Message"}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)(b.a,{variant:"outline-primary",type:"submit",children:"Envoyer"})})]})})]})};var P=function(){var e=f.a.firestore().collection("users").orderBy("timeCreated","desc"),t=Object(F.a)(e),n=Object(m.a)(t,3),s=n[0],r=n[1],i=n[2],o=Object(c.useState)(""),j=Object(m.a)(o,2),l=j[0],d=j[1];return""===l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:Object(a.jsxs)(y.a,{horizontal:!0,children:[Object(a.jsx)(y.a.Item,{bsPrefix:"list-group-item col-md-2",children:"Personne"}),Object(a.jsx)(y.a.Item,{bsPrefix:"list-group-item col-md-4",children:"Temps Cree"}),Object(a.jsx)(y.a.Item,{bsPrefix:"list-group-item col-md-2",children:"Lien"})]})}),i&&Object(a.jsxs)("strong",{children:["Error: ",JSON.stringify(i)]}),r&&Object(a.jsx)("span",{children:"Loading"}),s&&s.docs.map((function(e,t){return console.log(e.data()),Object(a.jsxs)(y.a,{horizontal:!0,children:[Object(a.jsxs)(y.a.Item,{bsPrefix:"list-group-item col-md-2",children:["Personne ",t+1]}),Object(a.jsx)(y.a.Item,{bsPrefix:"list-group-item col-md-4",children:new Date(1e3*e.data().timeCreated.seconds).toLocaleString()}),Object(a.jsx)(y.a.Item,{bsPrefix:"list-group-item col-md-2",children:Object(a.jsx)(b.a,{onClick:function(){d(e.id)},children:"Contactez"})})]})}))]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(S,{thread:d,uid:l,person:1})})};var A=function(){var e=f.a.auth(),t=Object(g.a)(e),n=Object(m.a)(t,1)[0],c={callbacks:{signInSuccessWithAuthResult:function(e,t){return!1}},signInFlow:"popup",signInOptions:[{provider:f.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!1}]};return Object(a.jsx)(a.Fragment,{children:n&&!n.isAnonymous?Object(a.jsx)(P,{}):Object(a.jsx)(v.StyledFirebaseAuth,{uiConfig:c,firebaseAuth:e})})},L=(n(82),n(90)),R=n(92);n(83);var D=function(){var e=f.a.auth(),t=Object(g.a)(e),n=Object(m.a)(t,2),s=n[0],r=n[1],i=Object(c.useRef)(!1);return Object(c.useEffect)((function(){i.current||(e.signInAnonymously(),console.log("[II] Singing in"),i.current=!0)}),[e]),Object(a.jsx)(a.Fragment,{children:!r&&(null===s||void 0===s?void 0:s.isAnonymous)?Object(a.jsx)(S,{uid:s.uid,person:0}):"Telechargement en cours..."})};var E=function(){return Object(a.jsx)(a.Fragment,{children:'"En progr\xe8s"'})},T=n(13);var B=function(){return f.a.apps.length?console.log("[WW] Firebase has already started."):f.a.initializeApp({apiKey:"AIzaSyDpFJ1vMnojgESGXD-yjlQyIXU8GuJNQLA",authDomain:"csachat-9dff3.firebaseapp.com",databaseURL:"https://csachat-9dff3-default-rtdb.firebaseio.com",projectId:"csachat-9dff3",storageBucket:"csachat-9dff3.appspot.com",messagingSenderId:"384915371882",appId:"1:384915371882:web:2a14a7141b635d69381713"}),Object(a.jsxs)(u.a,{basename:"/",children:[Object(a.jsxs)(L.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(L.a.Brand,{as:u.b,to:"/",children:"Pairs-Aidants"}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(R.a,{className:"mr-auto",children:[Object(a.jsx)(R.a.Link,{as:u.b,to:"/",children:"Accueil"}),Object(a.jsx)(R.a.Link,{as:u.b,to:"/selfhelp",children:"Ressources"}),Object(a.jsx)(R.a.Link,{as:u.b,to:"/about",children:"Nous conna\xeetre"})]}),Object(a.jsx)(R.a,{className:"ml-auto",children:Object(a.jsx)(R.a.Link,{as:u.b,to:"/signin",children:"Connection"})})]})]}),Object(a.jsxs)(T.c,{children:[Object(a.jsx)(T.a,{exact:!0,path:"/",children:Object(a.jsx)(p,{})}),Object(a.jsx)(T.a,{path:"/signin",children:Object(a.jsx)(A,{})}),Object(a.jsx)(T.a,{path:"/selfhelp",children:Object(a.jsx)(O,{})}),Object(a.jsx)(T.a,{path:"/teacherdash",children:Object(a.jsx)(P,{})}),Object(a.jsx)(T.a,{path:"/anon",children:Object(a.jsx)(D,{})}),Object(a.jsx)(T.a,{path:"/about",children:Object(a.jsx)(E,{})}),Object(a.jsx)(T.a,{path:"/chatpage",children:Object(a.jsx)(S,{})})]})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),z()}},[[84,1,2]]]);
//# sourceMappingURL=main.042cf531.chunk.js.map